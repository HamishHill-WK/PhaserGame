<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Participant Information Sheet and Research Consent Form</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/consent.css') }}">
</head>
<body>
    <div class="header">
        <div class="university-logo">
            <img src="{{ url_for('static', filename='assets/abertaylogo.png') }}" alt="Abertay University Logo" style="height: 60px; vertical-align: middle;">
        </div>
        <h2>Participant Information Sheet and Research Consent Form</h2>
    </div>

    <div class="consent-container">
            <div class="participant-code-banner" style="background:#f8f8e0; border:1px solid #ccc; padding:10px; margin-bottom:15px; font-size:1.1em;">
                <strong>Your Participant Code:</strong> <span style="font-family:monospace;">{{ participant_code }}</span><br>
                <span style="font-size:0.95em;">Please make a note of this in case you have any questions or wish to request data removal.</span>
            </div>        
        <div class="project-info">
            <strong>Project title:</strong> Game Mechanic Implementation With Natural Language Assistance<br>
            <strong>Researcher name:</strong> Hamish Hill<br>
            <strong>Institution:</strong> Faculty of Design, Informatics and Business, Abertay University
        </div>
        
        <div class="consent-section">
            <h3>What is the research about?</h3>
            <p>We invite you to participate in a research project investigating how domain expertise in game development enables users to effectively use Large Language Models (LLMs) as a code assistant when implementing game mechanics. This research explores how AI assistance interacts with domain expertise in game development in a mechanic implementation workflow.</p>
            <p>This research is being conducted as part of academic research at Abertay University.</p>
        </div>
        
        <div class="consent-section">
            <h3>Do I have to take part?</h3>
            <p>This form has been written to help you decide if you would like to take part. It is up to you and you alone whether you wish to take part. If you do decide to take part you will be free to withdraw at any time without providing a reason and without penalty.</p>
            <p>Participation is entirely voluntary, and you can close your browser at any time to withdraw from the study.</p>
        </div>
        
        <div class="consent-section">
            <h3>What will I be required to do?</h3>
            <p>You will be asked to:</p>
            <ul>
                <li>Complete a brief demographic survey about your programming and game development experience (approximately 5 minutes)</li>
                <li>Interact with a web-based game development environment that includes AI assistance</li>
                <li>Implement a series of game mechanics with the assistance of an LLM</li>
                <li>Some participants will be selected to be part of the control group who will not have access to the AI assitant</li>
            </ul>
            <p><strong>Total time commitment:</strong> Approximately 60-75 minutes.</p>
        </div>
        
        <div class="consent-section">
            <h3>How will you handle my data?</h3>
            <p>Your data will be stored in an <strong>anonymised</strong> form and will only be accessible to the research team. This means that nobody including the researchers could reasonably identify you within the data. Your data will be stored securely with data fully anonymised at the point of collection. Your responses are treated in the strictest confidence - it will be impossible to identify individuals within a dataset when any of the research is disseminated (e.g., in publications/presentations). Abertay University acts as Data Controller (DataProtectionOfficer@abertay.ac.uk).</p>
            
            <p>We will collect:</p>
            <ul>
                <li>Demographic information (age group, programming experience level, game development experience)</li>
                <li>Your natural language interactions with the AI chat interface</li>
                <li>Code modifications made to the game</li>
                <li>Task completion data, timestamps, and success rates</li>
                <li>System logs of your interactions with the development tool</li>
            </ul>
            <p class="important-text">No personally identifiable information will be collected beyond what you voluntarily provide.</p>
        </div>
        
        <div class="consent-section">
            <h3>Retention of research data</h3>
            <p>Researchers are obliged to retain research data for up to 10 years' post-publication, however your anonymised research data may be retained indefinitely (e.g., so that researchers engage in open practice and other researchers can access their data to confirm the conclusions of published work). Consistent with our data retention policy, researchers retain consent forms for as long as we continue to hold information about a data subject and for 10 years for published research.</p>
        </div>
        
        <div class="consent-section">
            <h3>Consent statement:</h3>
            <p>Abertay University attaches high priority to the ethical conduct of research. Please consider the following before indicating your consent on this form. Indicating your consent confirms that you are willing to participate in the research, however, indicating consent does not commit you to anything you do not wish to do and you are free to withdraw your participation at any time. You are indicating consent under the following assumptions:</p>
            <ul>
                <li>I understand the contents of the participant information sheet and consent form.</li>
                <li>I have been given the opportunity to ask questions about the research and have had them answered satisfactorily.</li>
                <li>I understand that my participation is entirely voluntary and that I can withdraw from the research (parts of the project or the entire project) at any time without penalty and without having to provide an explanation.</li>
                <li>I understand who has access to my data and how it will be handled at all stages of the research project.</li>
            </ul>
        </div>
        
        <form method="POST" action="{{ url_for('log_consent') }}">
            <table class="consent-table">
                <thead>
                    <tr>
                        <th style="width: 60%;">PLEASE INITIAL BOX:</th>
                        <th class="checkbox-cell">Yes, I do consent</th>
                        <th class="checkbox-cell">No, I do not consent</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>I consent to take part in this study conducted by Hamish Hill who intends to use my data for research examining how LLMs can assist users in game modification through natural language processing</td>
                        <td class="checkbox-cell">
                            <input type="radio" name="consent_participate" value="yes" id="consent-yes" required onchange="toggleSubmit()">
                        </td>
                        <td class="checkbox-cell">
                            <input type="radio" name="consent_participate" value="no" id="consent-no" required onchange="toggleSubmit()">
                        </td>
                    </tr>
                    <tr>
                        <td>I consent for the researcher to collect and process my anonymised interaction data, task completion data, and demographic information for this research study</td>
                        <td class="checkbox-cell">
                            <input type="radio" name="consent_data" value="yes" id="data-yes" required onchange="toggleSubmit()">
                        </td>
                        <td class="checkbox-cell">
                            <input type="radio" name="consent_data" value="no" id="data-no" required onchange="toggleSubmit()">
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="consent-buttons">
                <button type="submit" name="consent" value="agree" id="agree-btn" class="agree-btn" disabled>
                    Proceed to Study
                </button>
            </div>
        </form>
        
        <div style="margin-top: 30px; font-size: 12px; color: #666;">
            <p>You can find our procedure for complaints (regarding research projects) and our privacy notice and legal basis for processing research data at: <a href="https://www.abertay.ac.uk/legal/privacy-notice-for-research-participants/">https://www.abertay.ac.uk/legal/privacy-notice-for-research-participants/</a></p>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/consent.js') }}"></script>
</body>
</html>